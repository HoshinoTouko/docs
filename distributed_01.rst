分布式部署文档 - 环境说明
--------------------------------------------------------

环境
~~~~~~~

-  系统: CentOS 7
-  数据库 IP: 192.168.100.10 192.168.100.11 192.168.100.12
-  Redis ip: 192.168.100.20
-  JumpServer IP: 192.168.100.30
-  koko IP: 192.168.100.40
-  Guacamole IP: 192.168.100.50
-  Tengine 代理 IP: 192.168.100.100

+------------+-----------------+------------+------------------------+
|  Protocol  |   Server name   |    Port    |         Used By        |
+============+=================+============+========================+
|     TCP    |    JumpServer   | 8070, 8080 | Nginx, koko, Guacamole |
+------------+-----------------+------------+------------------------+
|     TCP    |       koko      | 2222, 5000 |         Tengine        |
+------------+-----------------+------------+------------------------+
|     TCP    |     Guacamole   |    8081    |         Tengine        |
+------------+-----------------+------------+------------------------+
|     TCP    |        Db       |    3306    |        JumpServer      |
+------------+-----------------+------------+------------------------+
|     TCP    |       Redis     |    6379    |        JumpServer      |
+------------+-----------------+------------+------------------------+
|     TCP    |      Tengine    |  80, 2222  |         All User       |
+------------+-----------------+------------+------------------------+


Nginx 多组件注意 upstream 的负载模式, 需要解决 session 问题

安全
~~~~~~~

ssh、telnet协议 资产的防火墙设置允许 koko 与 jumpserver 访问

rdp协议 资产的防火墙设置允许 guacamole 与 jumpserver 访问

其他
~~~~~~~

最终用户都是通过 Tengine 反向代理访问。
如需要做 HA 或 负载, 按照如上方式部署多个应用, 数据库做主从, 然后在 Tengine 代理服务器用负载即可(四层)。
注意：录像需要自己手动同步或者存放在公共目录。
